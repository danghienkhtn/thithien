<div class="asideCont clearfix" id="_jsListPackage">
    <div class="bgTitlef9f9f9 titleReport titlecampaign">
        General list (Total: <span><?php echo $this->iTotal; ?></span>)
        <div class="floatright clear">
            <a href="<?php echo BASE_ADMIN_URL; ?>/general/new/type/<?php echo $this->arrSearch['type'];?>">[New Config]</a>
        </div>
    </div>
    
    <div class="width100Pec floatleft clear">
        <form action="<?php echo BASE_ADMIN_URL; ?>/general" method="get" name="filterform">
            <div class="boxFilter">
                <label>Type:</label>
                <select id="_jsType" name="type" class="seleComm" style="width:120px;">
                    <option value="0">All</option>
                    <?php foreach($this->arrType as $key => $value): ?>
                    <option value="<?php echo $key; ?>" <?php if($this->arrSearch['type'] == $key) echo 'selected="true"'; ?>><?php echo $value; ?></option>
                    <?php endforeach; ?>                    
                </select>
                <p class="ico iconLineVer"><em></em></p>
                
                <label>Name:</label>
                <div class="boxSearch" style="margin: 0 10px;">
                    <div class="txtKeyword">
                        <input id="_jsKeyword" name="keyword" type="text" value="<?php echo $this->arrSearch['keyword']; ?>" placeholder="Enter name..." />
                    </div>
                    <a id="_jsBtnSearch" class="ico iconSearch" href="javascript::void(0);"><em></em></a>
                </div>
            </div>
            
            
            <div class="boxFilter">
                <label>Page size:</label>
                <select id="_jsPageSize" name="pagesize" class="seleComm width50">
                    <option <?php if($this->pagesize == "5") echo 'selected="true"'; ?>  >5</option>
                    <option <?php if($this->pagesize == "10") echo 'selected="true"'; ?> >10</option>
                    <option <?php if($this->pagesize == "15") echo 'selected="true"'; ?> >15</option>
                </select>
                <p class="ico iconLineVer"><em></em></p>
                <a id="_jsBtnSubmit" href="javascript:void(0);"  class="button green"><span class="ico iconGoo"><em></em></span>Search</a>
                <p class="ico iconLineVer"><em></em></p>
                <a id="_jsBtnReset" href="javascript:void(0);" class="button green"><span class="ico iconRefresh"><em></em></span>Refresh</a>
            </div>
            
            <div class="hidden">
                <input type="hidden"  value="<?php echo $this->iPage; ?>" name="page" id="_jsPage" />
            </div>
        </form>
    </div>
    
    <table width="100%" cellspacing="0" cellpadding="0" border="1" class="tblComm tblListCont">
        <tbody>
            <?php if ($this->isCheck ==1): ?>
                <tr>
                    <th align="left">No.</th>
                    <th align="left" width="25%">Name</th>
                    <th align="left"width="25%" >Type Name</th>
                    <th align="left">Sort Order</th>
                    <th align="left">IsShow</th>
                    <th align="left">Active</th>
                </tr>
                <?php
                
                 $index=0;
                 foreach ($this->paginator as $value): ?>
                 <tr>
                    <td align="left"><?php echo $index + 1; ?></td>
                    <td align="left"><a href="<?php echo BASE_ADMIN_URL; ?>/general/upd?id=<?php echo $value['general_id']; ?>" ><?php echo $value['name']; ?></a></td>
                    <td align="left">
                        <?php 
                          echo isset($this->arrType[$value['type']])?$this->arrType[$value['type']]:'';
                        ?>
                    </td>
                    <td align="left"><?php echo $value['sort_order']; ?></td>
                    <td align="center"><input disabled type="checkbox"<?php if (!empty($value['active']) && ($value['active'])) {echo "checked";} ?> /></td>
                    <td align="left">
                        <a href="<?php echo BASE_ADMIN_URL; ?>/general/upd?id=<?php echo $value['general_id']; ?>&page=<?php echo $this->iPage; ?>">Update</a> | 
                        <a class="btnDelete" rel="<?php echo $value['general_id']; ?>"  href="javascript:void(0);">Delete</a>
                    </td>
                </tr>
                <?php 
                 $index++;
                endforeach; 
                ?>
                <tr>
                   <th align="left">No.</th>
                    <th align="left" width="25%">Name</th>
                    <th align="left"width="25%" >Type Name</th>
                    <th align="left">Sort Order</th>
                    <th align="left">IsShow</th>
                    <th align="left">Active</th>
                </tr>
            <?php else: ?>
                <tr>
                    <th colspan="3">Don't have data</th>
                </tr>
            <?php endif; ?>
        </tbody>
    </table>

    <?php echo $this->paginator ?>
</div>
<div id="toTop">^ Back to Top</div>
<script type="text/javascript">
    
    $(function() {
	$(window).scroll(function() {
		if($(this).scrollTop() != 0) {
			$('#toTop').fadeIn();	
		} else {
			$('#toTop').fadeOut();
		}
	});
 
	$('#toTop').click(function() {
		$('body,html').animate({scrollTop:0},800);
	});	
    });
    
    var reset = function()
    {
        $("#_jsPageSize").val("10");
        $("#_jsKeyword").val("");
        $("#_jsPage").val("1");
        $("#_jsType").val("0");
        
    };
    
    $("#_jsBtnReset").click(function(){
        reset();
        document.forms['filterform'].submit();
    });
    
    $("#_jsBtnSearch").click(function(){
         $("#_jsPage").val("1");
         document.forms['filterform'].submit();
    });
    
    $("#_jsBtnSubmit").click(function(){
         $("#_jsPage").val("1");
         document.forms['filterform'].submit();
    });
    
    
    $('#_jsKeyword').keypress(function(event){
 
	var keycode = (event.keyCode ? event.keyCode : event.which);
	if(keycode == '13'){
            $("#_jsPage").val("1");
	 }
	event.stopPropagation();
     });
    
    
    $(".btnDelete").click(function() {
        var id = $(this).attr('rel');

        if(id)
        {          
            if(confirm('Are you sure want to delete this item?'))
            {
                $.post("<?php echo BASE_ADMIN_URL; ?>/general/delete",{ id: id },function(result){
                    if(result.error == 0)
                    {
              
                       window.location= '<?php echo BASE_ADMIN_URL; ?>/general/index/page/<?php echo $this->iPage;?>';
                    }
                    else
                    {
                        alert(result.message);
                    }
                },'json');
            }
        }
    });
</script>